(this["webpackJsonpreact-graph"]=this["webpackJsonpreact-graph"]||[]).push([[0],{14:function(e,t,n){"use strict";n.r(t);var c,r=n(0),i=n(1),o=n.n(i),d=n(7),a=n.n(d),u=n(8),s=n(3),j=n(2),l=n(16),b={dragging:!1,initial:{x:0,y:0},current:{x:0,y:0}},x=function(e,t){var n=Object(i.useState)(b),c=Object(s.a)(n,2),r=c[0],o=c[1],d=function(e){r.dragging&&o(Object(j.a)(Object(j.a)({},r),{},{current:{x:e.clientX,y:e.clientY}}))},a=function(e){r.dragging&&(t(),o(b))};return Object(i.useEffect)((function(){var t=null;return e.current&&((t=e.current).addEventListener("mousemove",d),t.addEventListener("mouseup",a)),function(){t&&(t.removeEventListener("mousemove",d),t.removeEventListener("mouseup",a))}})),{dragged:{x:r.current.x-r.initial.x,y:r.current.y-r.initial.y},onMouseDown:function(e){0===e.button&&o({dragging:!0,initial:{x:e.clientX,y:e.clientY},current:{x:e.clientX,y:e.clientY}})}}},h=function(e,t){return".".repeat(t).split("").flatMap((function(){return e}))},g=function(e){var t=e.vertical,n=e.horizontal,c=e.width,i=e.height,o="0 0 ".concat(c," ").concat(i),d=t.reduce((function(e,t){return e+t}),0),a=n.reduce((function(e,t){return e+t}),0);t=h(t,c/d+1),n=h(n,i/a+1);var u=t.reduce((function(e,t){var n=e.x+t;return{x:n,pathCommand:e.pathCommand+"M".concat(n,",0 V").concat(i," ")}}),{x:0,pathCommand:""}).pathCommand,s=n.reduce((function(e,t){var n=e.y+t;return{y:n,pathCommand:e.pathCommand+"M0,".concat(n," H").concat(c," ")}}),{y:0,pathCommand:""}).pathCommand;return Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:o,children:Object(r.jsx)("path",{stroke:"#3c529e",d:u+s})})},f={nodes:[],edges:[]},p=Object(i.createContext)({ref:{current:null}});!function(e){e[e.UpdatePosition=0]="UpdatePosition",e[e.UpdateAttribute=1]="UpdateAttribute",e[e.AddEdge=2]="AddEdge",e[e.RemoveEdge=3]="RemoveEdge"}(c||(c={}));var O=function(e,t){switch(t.type){case c.UpdatePosition:var n=Object(j.a)({},e),r=e.nodes.findIndex((function(e){return e.uid===t.uid}));return-1===r?n.nodes.push({uid:t.uid,x:t.x,y:t.y}):(n.nodes[r].x=t.x,n.nodes[r].y=t.y),n;case c.UpdateAttribute:case c.AddEdge:}return e},v=function(e){var t=e.children,n=e.uid,c=e.dragged,o=(0,Object(i.useContext)(p).getPosition)(n),d=o.x,a=o.y,u=d+c.x,s=a+c.y;return Object(r.jsx)("div",{style:{position:"absolute",userSelect:"none",left:"".concat(u,"px"),top:"".concat(s,"px")},children:t})},m=function(){var e=Object(l.a)(),t=Object(i.useContext)(p),n=t.getPosition,o=t.dispatch,d=t.ref,a=n(e),u=a.x,s=a.y,b=x(d,(function(){o(function(e,t,n){return{type:c.UpdatePosition,uid:e,x:t,y:n}}(e,u+h.x,s+h.y))})),h=b.dragged,g=b.onMouseDown,f=function(e){var t=e.children;return Object(r.jsx)("div",{onMouseDown:g,children:t})};return{uid:e,Node:function(t){var n=Object.assign({},t);return Object(r.jsx)(v,Object(j.a)({uid:e,dragged:h},n))},Draggable:function(t){var n=Object.assign({},t);return Object(r.jsx)(f,Object(j.a)({uid:e},n))}}},y=function(e){var t=e.children,n=e.width,c=e.height,o=e.background,d=void 0===o?"#1c2e60":o,a=Object(i.useRef)(null),u=Object(i.useReducer)(O,f),l=Object(s.a)(u,2),b=l[0],x=l[1];return Object(r.jsx)(p.Provider,{value:{state:b,dispatch:x,getPosition:function(e){var t=b.nodes.find((function(t){return t.uid===e}));return Object(j.a)(Object(j.a)({},{x:0,y:0}),t)},ref:a},children:Object(r.jsxs)("div",{style:{width:"".concat(n,"px"),height:"".concat(c,"px"),backgroundColor:d,color:"#eaeaea",position:"relative",overflow:"hidden"},ref:a,children:[Object(r.jsx)(g,{height:c,width:n,vertical:[50,10,10,10],horizontal:[50,10,10,10]}),t]})})},w=function(){var e=m(),t=e.Node,n=e.Draggable,c=e.uid;return Object(r.jsxs)(t,{children:[Object(r.jsx)(n,{children:Object(r.jsxs)("div",{style:{background:"grey"},children:["Uid: ",c]})}),Object(r.jsx)("div",{style:{background:"black"},children:Object(r.jsx)("div",{style:{padding:"20px"},children:"generic node type 1"})})]})},C=function(e){var t=e.onClose,n=m(),c=n.Node,i=n.Draggable,o=n.uid;return Object(r.jsx)(c,{children:Object(r.jsx)(i,{children:Object(r.jsxs)("div",{style:{background:"#003"},children:[Object(r.jsxs)("span",{children:["Uid: ",o]}),Object(r.jsxs)("div",{style:{padding:"20px"},children:["generic node type 2",Object(r.jsx)("button",{onClick:function(){"function"===typeof t&&t()},children:"Close"})]})]})})})},k=function(){var e=Object(i.useState)({max:0,items:[]}),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(r.jsxs)("div",{children:[Object(r.jsxs)(y,{width:1200,height:500,children:[Object(r.jsx)(w,{}),Object(r.jsx)(w,{}),n.items.map((function(e){return Object(r.jsx)(C,{onClose:function(){return function(e){c({max:n.max,items:n.items.filter((function(t){return t!==e}))})}(e)}},e)}))]}),Object(r.jsx)("button",{onClick:function(){var e=n.max+1;c({max:e,items:[].concat(Object(u.a)(n.items),[e])})},children:"Add new"})]})};a.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(k,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.973eb042.chunk.js.map