{"version":3,"sources":["graph/index.tsx","graph/useDraggable.ts","graph/backgroundgraph.tsx","app.tsx","index.tsx"],"names":["ActionType","initialState","dragging","initial","x","y","current","useDraggable","ref","onDragDone","useState","setDragging","dragged","useMemo","onMouseMove","e","clientX","clientY","onMouseUp","useEffect","currentRef","addEventListener","removeEventListener","onMouseDown","button","stopPropagation","repeatArray","array","times","repeat","split","flatMap","BackgroundGraph","vertical","horizontal","width","height","viewBox","sumVertical","reduce","a","b","sumHorizontal","verticalPath","moveRightBy","pathCommand","newX","horizontalPath","moveDownBy","newY","xmlns","stroke","d","nodes","edges","GraphContext","createContext","graphReducer","state","action","type","UpdateRelativePosition","newState","index","findIndex","node","uid","push","UpdateAttribute","AddEdge","Draggable","children","nodeRef","useContext","getPosition","dispatch","updatePosition","style","left","top","Node","position","userSelect","useNode","useUID","useRef","args","GraphComponent","background","useReducer","_position","setPosition","Provider","value","find","backgroundColor","color","overflow","JSON","stringify","GenericNode1","padding","GenericNode2","onClose","onClick","App","max","items","num","setNum","map","i","filter","itm","remove","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.06999138.chunk.js","sourcesContent":["import React, { createContext, useContext, useReducer, useRef, useEffect, useState } from 'react';\nimport { useUID } from 'react-uid';\nimport useDraggable from './useDraggable';\nimport BackgroundGraph from './backgroundgraph';\n\ntype Uid = string;\ntype Color = string;\ntype Vector = { x: number, y: number };\ntype RefType = { current: any }; // TODO: type this?\n\ninterface Graph {\n\tnodes: any[];\n\tedges: any[];\n}\n\nconst initialState : Graph = {\n\tnodes: [],\n\tedges: [],\n}\n\nconst GraphContext = createContext<{\n\tstate?: Graph;\n\tdispatch?: Function;\n\tgetPosition?: Function;\n\tref: RefType;\n}>({\n\tref: { current: null }\n});\n\nenum ActionType {\n\tUpdateRelativePosition,\n\tUpdateAttribute,\n\tAddEdge,\n\tRemoveEdge,\n};\n\ntype Actions =\n | { type: ActionType.UpdateRelativePosition, uid: Uid, x: Number, y: Number }\n | { type: ActionType.UpdateAttribute, uid: Uid, key: String, value: any }\n | { type: ActionType.AddEdge, fromNode: Uid, toNode: Uid };\n\nconst graphReducer = (state : Graph, action: Actions) => {\n\tswitch(action.type) {\n\t\tcase ActionType.UpdateRelativePosition:\n\t\t\tconst newState = { ...state };\n\t\t\tconst index = state.nodes.findIndex((node) => node.uid === action.uid);\n\t\t\tif(index === -1) {\n\t\t\t\tnewState.nodes.push({uid: action.uid, x: action.x, y: action.y});\n\t\t\t} else {\n\t\t\t\tnewState.nodes[index].x += action.x;\n\t\t\t\tnewState.nodes[index].y += action.y;\n\t\t\t}\n\t\t\treturn newState;\n\t\tcase ActionType.UpdateAttribute:\n\t\tcase ActionType.AddEdge:\n\t\tdefault:\n\t\t\tbreak;\n\t}\n\n\treturn state;\n};\n\nconst updatePosition = (uid: Uid, x: Number, y: Number) => ({ type: ActionType.UpdateRelativePosition, uid, x, y });\n\ninterface GraphComponentProps {\n\twidth: number,\n\theight: number,\n\tbackground?: Color,\n}\n\nconst GraphComponent : React.FC<GraphComponentProps> = ({\n\tchildren,\n\twidth,\n\theight,\n\tbackground = '#1c2e60'\n}) => {\n\tconst ref = useRef(null);\n\tconst [ state, dispatch ] = useReducer(graphReducer, initialState);\n\tconst [ _position, setPosition ] = useState({ x: 0, y: 0 });\n\tconst { dragged, onMouseDown } = useDraggable(ref, (dragged : Vector) => {\n\t\tsetPosition({\n\t\t\tx: _position.x + dragged.x,\n\t\t\ty: _position.y + dragged.y,\n\t\t});\n\t});\n\n\tconst position = {\n\t\tx: _position.x + dragged.x,\n\t\ty: _position.y + dragged.y,\n\t};\n\n\tconst getPosition = (uid: Uid) => {\n\t\tconst node = state.nodes.find((node) => node.uid === uid);\n\t\tconst defaultValues = { x: 0, y: 0 };\n\t\treturn { ...defaultValues, ...node };\n\t}\n\n\treturn <GraphContext.Provider value={{\n\t\tstate,\n\t\tdispatch,\n\t\tgetPosition,\n\t\tref,\n\t}}>\n\t\t<div style={{\n\t\t\twidth: `${width}px`,\n\t\t\theight: `${height}px`,\n\t\t\tbackgroundColor: background,\n\t\t\tcolor: '#eaeaea',\n\t\t\tposition: 'relative',\n\t\t\toverflow: 'hidden',\n\t\t}}\n\t\tref={ref}\n\t\tonMouseDown={onMouseDown}\n\t\t>\n\t\t\t<span style={{\n\t\t\t\tposition: 'absolute',\n\t\t\t\tuserSelect: 'none',\n\t\t\t}}>{JSON.stringify(position)}</span>\n\t\t\t<BackgroundGraph\n\t\t\t\theight={height}\n\t\t\t\twidth={width}\n\t\t\t\tvertical={[50, 10, 10, 10]}\n\t\t\t\thorizontal={[50, 10, 10, 10]}\n\t\t\t\tdragged={position}\n\t\t\t\t/>\n\t\t\t<div style={{\n\t\t\t\tposition: 'absolute',\n\t\t\t\twidth: '100%',\n\t\t\t\theight: '100%',\n\t\t\t\tleft: `${position.x}px`,\n\t\t\t\ttop: `${position.y}px`,\n\t\t\t}}>\n\t\t\t\t<div style={{\n\t\t\t\t\tposition: 'relative',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\theight: '100%',\n\t\t\t\t}}>\n\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</GraphContext.Provider>\n};\n\n\ninterface DraggableProps {\n\tuid: Uid;\n\tnodeRef: RefType;\n}\n\nconst Draggable : React.FC<DraggableProps> = ({ uid, children, nodeRef }) => {\n\tconst { getPosition, dispatch, ref } = useContext(GraphContext);\n\tconst { x, y } = getPosition!(uid);\n\tconst { dragged, onMouseDown } = useDraggable(ref, (dragged : {x: number, y: number}) => {\n\t\tdispatch!(updatePosition(\n\t\t\tuid,\n\t\t\tdragged.x,\n\t\t\tdragged.y,\n\t\t));\n\t});\n\n\tuseEffect(() => {\n\t\tnodeRef.current.style.left = (x + dragged.x) + 'px';\n\t\tnodeRef.current.style.top = (y + dragged.y) + 'px';\n\t}, [x, y, dragged, nodeRef]);\n\n\treturn <div onMouseDown={onMouseDown}>{children}</div>;\n};\n\n\ninterface NodeProps {\n\tuid: Uid;\n\tnodeRef: RefType;\n}\n\nconst Node : React.FC<NodeProps> = ({ children, uid, nodeRef }) => {\n\tconst { getPosition } = useContext(GraphContext);\n\tconst { x, y } = getPosition!(uid);\n\n\treturn <div style={{\n\t\tposition: 'absolute',\n\t\tuserSelect: 'none',\n\t\tleft: `${x}px`,\n\t\ttop: `${y}px`,\n\t}}\n\tref={nodeRef}\n\t>\n\t\t{children}\n\t</div>\n};\n\nexport const useNode = () => {\n\tconst uid = useUID();\n\tconst nodeRef = useRef(null);\n\n\treturn {\n\t\tuid,\n\t\tNode: ({ ...args }) => <Node uid={uid} nodeRef={nodeRef} {...args} />,\n\t\tDraggable: ({ ...args }) => <Draggable uid={uid} nodeRef={nodeRef} {...args} />,\n\t};\n}\n\nexport default GraphComponent;\n","import { useState, useEffect, useMemo } from 'react';\n\ninterface Vector {\n\tx: number,\n\ty: number,\n};\n\ninterface DraggableInterface {\n\tdragging: boolean;\n\tinitial: Vector;\n\tcurrent: Vector;\n}\n\nconst initialState : DraggableInterface = {\n\tdragging: false,\n\tinitial: { x: 0, y: 0 },\n\tcurrent: { x: 0, y: 0 },\n};\n\nconst useDraggable = (ref: { current: any }, onDragDone : Function) => {\n\tconst [dragging, setDragging] = useState(initialState);\n\tconst dragged = useMemo<Vector>(() => ({\n\t\tx: dragging.current.x - dragging.initial.x,\n\t\ty: dragging.current.y - dragging.initial.y,\n\t}), [dragging]);\n\n\tconst onMouseDown = (e : React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n\t\t// Only drag on left click\n\t\tif(e.button === 0) {\n\t\t\te.stopPropagation();\n\t\t\tsetDragging({\n\t\t\t\tdragging: true,\n\t\t\t\tinitial: {\n\t\t\t\t\tx: e.clientX,\n\t\t\t\t\ty: e.clientY,\n\t\t\t\t},\n\t\t\t\tcurrent: {\n\t\t\t\t\tx: e.clientX,\n\t\t\t\t\ty: e.clientY,\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t};\n\tconst onMouseMove = (e: MouseEvent) => {\n\t\tif(dragging.dragging) {\n\t\t\tsetDragging({\n\t\t\t\t...dragging,\n\t\t\t\tcurrent: {\n\t\t\t\t\tx: e.clientX,\n\t\t\t\t\ty: e.clientY,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\tconst onMouseUp = (e: MouseEvent) => {\n\t\tif(dragging.dragging) {\n\t\t\tonDragDone(dragged);\n\t\t\tsetDragging(initialState);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tvar currentRef : any = null;\n\t\tif(ref.current) {\n\t\t\tcurrentRef = ref.current;\n\t\t\tcurrentRef.addEventListener('mousemove', onMouseMove);\n\t\t\tcurrentRef.addEventListener('mouseup', onMouseUp);\n\t\t}\n\n\t\treturn () => {\n\t\t\tif(currentRef) {\n\t\t\t\tcurrentRef.removeEventListener('mousemove', onMouseMove);\n\t\t\t\tcurrentRef.removeEventListener('mouseup', onMouseUp);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn { dragged, onMouseDown };\n};\n\nexport default useDraggable;\n","import React from 'react';\n\n/*\n *\tRepeats an array a number of times\n *\n *  Example:\n *    repeatArray([1, 2, 3], 2); // Result: [1, 2, 3, 1, 2, 3]\n */\nconst repeatArray = (array : any[], times : number) =>\n\t'.'.repeat(times).split('').flatMap(() => array);\n\ninterface BackgroundGraphProps {\n\tvertical: number[];\n\thorizontal: number[];\n\twidth: number;\n\theight: number;\n\tdragged: { x: number, y: number };\n};\n\nconst BackgroundGraph : React.FC<BackgroundGraphProps> = ({ vertical, horizontal, width, height, dragged }) => {\n\tconst viewBox = `0 0 ${width} ${height}`;\n\tconst sumVertical   = vertical.reduce((a,b) => a+b, 0);\n\tconst sumHorizontal = horizontal.reduce((a,b) => a+b, 0);\n\n\t// Repeat horizontal and vertical lines until they fill the width and height\n\tvertical   = repeatArray(vertical, width / sumVertical);\n\thorizontal = repeatArray(horizontal, height / sumHorizontal);\n\n\tconst verticalPath = vertical.reduce(\n\t\t({x, pathCommand}, moveRightBy) => {\n\t\t\tconst newX = (x+moveRightBy + width) % width;\n\t\t\tconst newLine = `M${newX},0 V${height} `;\n\n\t\t\treturn {\n\t\t\t\tx: newX,\n\t\t\t\tpathCommand: pathCommand+newLine\n\t\t\t};\n\t\t},\n\t\t{x: dragged.x, pathCommand: ''}\n\t).pathCommand;\n\n\tconst horizontalPath = horizontal.reduce(\n\t\t({y, pathCommand}, moveDownBy) => {\n\t\t\tconst newY = (y+moveDownBy + height) % height;\n\t\t\tconst newLine = `M0,${newY} H${width} `;\n\n\t\t\treturn {\n\t\t\t\ty: newY,\n\t\t\t\tpathCommand: pathCommand+newLine\n\t\t\t};\n\t\t},\n\t\t{y: dragged.y, pathCommand: ''}\n\t).pathCommand;\n\n\treturn <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox={viewBox}>\n\t\t<path stroke='#3c529e' d={verticalPath + horizontalPath} />\n\t</svg>;\n};\n\nexport default BackgroundGraph;\n","import React, { useState } from 'react';\nimport Graph, { useNode } from './graph';\n\nconst GenericNode1 : React.FC = () => {\n\tconst { Node, Draggable, uid } = useNode();\t\n\n\treturn <Node>\n\t\t<Draggable>\n\t\t<div style={{ background: 'darkgrey' }}>\n\t\t\tUid: {uid}\n\t\t</div>\n\t\t</Draggable>\n\t\t<div style={{ background: 'black' }}>\n\t\t\t<div style={{ padding: '20px'}}>\n\t\t\tgeneric node type 1\t\n\t\t\t</div>\n\t\t</div>\n\t</Node>\n}\n\nconst GenericNode2 : React.FC<{\n\tonClose?: Function\n}> = ({ onClose }) => {\n\tconst { Node, Draggable, uid } = useNode();\t\n\tconst onClick = () => {\n\t\tif(typeof onClose === 'function')\n\t\t\tonClose();\n\t}\n\n\treturn <Node>\n\t\t<Draggable>\n\t\t\t<div style={{ background: '#003' }}>\n\t\t\t\t<span>Uid: {uid}</span>\n\t\t\t\t<div style={{ padding: '20px'}}>\n\t\t\t\t\tgeneric node type 2\t\n\t\t\t\t\t<button onClick={onClick}>Close</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Draggable>\n\t</Node>\n}\n\nconst App : React.FC = () => {\n\tconst [num, setNum] = useState<{\n\t\tmax: number;\n\t\titems: number[];\n\t}>({\n\t\tmax: 0,\n\t\titems: [],\n\t});\n\tconst onClick = () => {\n\t\tconst max = num.max +1\n\t\tsetNum({\n\t\t\tmax,\n\t\t\titems: [ ...num.items, max ],\n\t\t});\n\t};\n\tconst remove = (i : number) => {\n\t\tsetNum({\n\t\t\tmax: num.max,\n\t\t\titems: num.items.filter(itm => itm !== i)\n\t\t});\n\t}\n\n\treturn <div>\n\t\t<Graph width={1200} height={500}>\n\t\t\t<GenericNode1 />\n\t\t\t<GenericNode1 />\n\t\t\t{\n\t\t\t\tnum.items.map(i => (\n\t\t\t\t\t<GenericNode2 key={i} onClose={() => remove(i)} />\n\t\t\t\t))\n\t\t\t}\n\t\t</Graph>\n\t\t<button onClick={onClick}>Add new</button>\n\t</div>\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}