(this["webpackJsonpreact-graph"]=this["webpackJsonpreact-graph"]||[]).push([[0],{11:function(e,t,n){"use strict";n.r(t);var i,r=n(0),c=n(1),d=n.n(c),o=n(5),u=n.n(o),a=n(3),s=n(2),j=n(13),l=function(e,t){var n=Object(c.useState)({dragging:!1,initial:{x:0,y:0},current:{x:0,y:0}}),i=Object(a.a)(n,2),r=i[0],d=i[1],o=function(e){r.dragging&&d(Object(s.a)(Object(s.a)({},r),{},{current:{x:e.clientX,y:e.clientY}}))},u=function(e){r.dragging&&(t(),d({dragging:!1,initial:{x:0,y:0},current:{x:0,y:0}}))};return Object(c.useEffect)((function(){var t=null;return e.current&&((t=e.current).addEventListener("mousemove",o),t.addEventListener("mouseup",u)),function(){t&&(t.removeEventListener("mousemove",o),t.removeEventListener("mouseup",u))}})),{dragged:{x:r.current.x-r.initial.x,y:r.current.y-r.initial.y},onMouseDown:function(e){d({dragging:!0,initial:{x:e.clientX,y:e.clientY},current:{x:e.clientX,y:e.clientY}})}}},b={nodes:[],edges:[]},x=Object(c.createContext)({ref:{current:null}});!function(e){e[e.UpdatePosition=0]="UpdatePosition",e[e.UpdateAttribute=1]="UpdateAttribute",e[e.AddEdge=2]="AddEdge",e[e.RemoveEdge=3]="RemoveEdge"}(i||(i={}));var g=function(e,t){switch(t.type){case i.UpdatePosition:var n=Object(s.a)({},e),r=e.nodes.findIndex((function(e){return e.uid===t.uid}));return-1===r?n.nodes.push({uid:t.uid,x:t.x,y:t.y}):(n.nodes[r].x=t.x,n.nodes[r].y=t.y),n;case i.UpdateAttribute:case i.AddEdge:}return e},p=function(e){var t=e.children,n=e.uid,d=Object(c.useContext)(x),o=d.getPosition,u=d.dispatch,a=d.ref,s=o(n),j=s.x,b=s.y,g=l(a,(function(){u(function(e,t,n){return{type:i.UpdatePosition,uid:e,x:t,y:n}}(n,j+p.x,b+p.y))})),p=g.dragged,O=g.onMouseDown,f=j+p.x,h=b+p.y;return Object(r.jsxs)("div",{style:{position:"absolute",background:"black",userSelect:"none",left:"".concat(f,"px"),top:"".concat(h,"px")},onMouseDown:O,children:[Object(r.jsxs)("span",{children:["Uuid: ",n]}),Object(r.jsx)("div",{children:t})]})},O=function(){var e=Object(j.a)();return{Node:function(t){var n=Object.assign({},t);return Object(r.jsx)(p,Object(s.a)({uid:e},n))}}},f=function(e){var t=e.children,n=e.width,i=e.height,d=Object(c.useRef)(null),o=Object(c.useReducer)(g,b),u=Object(a.a)(o,2),j=u[0],l=u[1];return Object(r.jsx)(x.Provider,{value:{state:j,dispatch:l,getPosition:function(e){var t=j.nodes.find((function(t){return t.uid===e}));return Object(s.a)(Object(s.a)({},{x:0,y:0}),t)},ref:d},children:Object(r.jsx)("div",{style:{width:"".concat(n,"px"),height:"".concat(i,"px"),backgroundColor:"darkblue",color:"#eaeaea",position:"relative",overflow:"hidden"},ref:d,children:t})})},h=function(){var e=O().Node;return Object(r.jsx)(e,{children:Object(r.jsx)("div",{style:{padding:"20px"},children:"generic node type 1"})})},v=function(){var e=O().Node;return Object(r.jsx)(e,{children:Object(r.jsx)("div",{style:{padding:"20px"},children:"generic node type 2"})})},y=function(){var e=Object(c.useState)(0),t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(r.jsxs)("div",{children:[Object(r.jsxs)(f,{width:1200,height:500,children:[Object(r.jsx)(h,{}),Object(r.jsx)(v,{}),".".repeat(n).split("").map((function(e,t){return Object(r.jsx)(v,{},t)}))]}),Object(r.jsx)("button",{onClick:function(){i(n+1)},children:"Add new"})]})};u.a.render(Object(r.jsx)(d.a.StrictMode,{children:Object(r.jsx)(y,{})}),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.3c4139f4.chunk.js.map