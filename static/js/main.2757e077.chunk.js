(this["webpackJsonpreact-graph"]=this["webpackJsonpreact-graph"]||[]).push([[0],{14:function(e,t,n){"use strict";n.r(t);var i,c=n(0),r=n(1),o=n.n(r),d=n(7),u=n.n(d),s=n(8),a=n(3),j=n(2),l=n(16),b={dragging:!1,initial:{x:0,y:0},current:{x:0,y:0}},x=function(e,t){var n=Object(r.useState)(b),i=Object(a.a)(n,2),c=i[0],o=i[1],d=function(e){c.dragging&&o(Object(j.a)(Object(j.a)({},c),{},{current:{x:e.clientX,y:e.clientY}}))},u=function(e){c.dragging&&(t(),o(b))};return Object(r.useEffect)((function(){var t=null;return e.current&&((t=e.current).addEventListener("mousemove",d),t.addEventListener("mouseup",u)),function(){t&&(t.removeEventListener("mousemove",d),t.removeEventListener("mouseup",u))}})),{dragged:{x:c.current.x-c.initial.x,y:c.current.y-c.initial.y},onMouseDown:function(e){o({dragging:!0,initial:{x:e.clientX,y:e.clientY},current:{x:e.clientX,y:e.clientY}})}}},f={nodes:[],edges:[]},O=Object(r.createContext)({ref:{current:null}});!function(e){e[e.UpdatePosition=0]="UpdatePosition",e[e.UpdateAttribute=1]="UpdateAttribute",e[e.AddEdge=2]="AddEdge",e[e.RemoveEdge=3]="RemoveEdge"}(i||(i={}));var g=function(e,t){switch(t.type){case i.UpdatePosition:var n=Object(j.a)({},e),c=e.nodes.findIndex((function(e){return e.uid===t.uid}));return-1===c?n.nodes.push({uid:t.uid,x:t.x,y:t.y}):(n.nodes[c].x=t.x,n.nodes[c].y=t.y),n;case i.UpdateAttribute:case i.AddEdge:}return e},p=function(e){var t=e.children,n=e.uid,o=Object(r.useContext)(O),d=o.getPosition,u=o.dispatch,s=o.ref,a=d(n),j=a.x,l=a.y,b=x(s,(function(){u(function(e,t,n){return{type:i.UpdatePosition,uid:e,x:t,y:n}}(n,j+f.x,l+f.y))})),f=b.dragged,g=b.onMouseDown,p=j+f.x,h=l+f.y;return Object(c.jsxs)("div",{style:{position:"absolute",background:"black",userSelect:"none",left:"".concat(p,"px"),top:"".concat(h,"px")},onMouseDown:g,children:[Object(c.jsxs)("span",{children:["Uuid: ",n]}),Object(c.jsx)("div",{children:t})]})},h=function(){var e=Object(l.a)();return{Node:function(t){var n=Object.assign({},t);return Object(c.jsx)(p,Object(j.a)({uid:e},n))}}},v=function(e){var t=e.children,n=e.width,i=e.height,o=Object(r.useRef)(null),d=Object(r.useReducer)(g,f),u=Object(a.a)(d,2),s=u[0],l=u[1];return Object(c.jsx)(O.Provider,{value:{state:s,dispatch:l,getPosition:function(e){var t=s.nodes.find((function(t){return t.uid===e}));return Object(j.a)(Object(j.a)({},{x:0,y:0}),t)},ref:o},children:Object(c.jsx)("div",{style:{width:"".concat(n,"px"),height:"".concat(i,"px"),backgroundColor:"darkblue",color:"#eaeaea",position:"relative",overflow:"hidden"},ref:o,children:t})})},y=function(){var e=h().Node;return Object(c.jsx)(e,{children:Object(c.jsx)("div",{style:{padding:"20px"},children:"generic node type 1"})})},m=function(e){var t=e.onClose,n=h().Node;return Object(c.jsx)(n,{children:Object(c.jsxs)("div",{style:{padding:"20px"},children:["generic node type 2",Object(c.jsx)("button",{onClick:function(){"function"===typeof t&&t()},children:"Close"})]})})},w=function(){var e=Object(r.useState)({max:0,items:[]}),t=Object(a.a)(e,2),n=t[0],i=t[1];return Object(c.jsxs)("div",{children:[Object(c.jsxs)(v,{width:1200,height:500,children:[Object(c.jsx)(y,{}),Object(c.jsx)(y,{}),n.items.map((function(e){return Object(c.jsx)(m,{onClose:function(){return function(e){i({max:n.max,items:n.items.filter((function(t){return t!==e}))})}(e)}},e)}))]}),Object(c.jsx)("button",{onClick:function(){var e=n.max+1;i({max:e,items:[].concat(Object(s.a)(n.items),[e])})},children:"Add new"})]})};u.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)(w,{})}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.2757e077.chunk.js.map