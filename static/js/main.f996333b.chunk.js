(this["webpackJsonpreact-graph"]=this["webpackJsonpreact-graph"]||[]).push([[0],{15:function(e,t,n){"use strict";n.r(t);var c,i=n(0),o=n(1),r=n.n(o),a=n(7),d=n.n(a),s=n(8),u=n(3),j=n(9),l=n(2),x=n(17),b={dragging:!1,initial:{x:0,y:0},current:{x:0,y:0}},h=function(e,t){var n=Object(o.useState)(b),c=Object(u.a)(n,2),i=c[0],r=c[1],a=Object(o.useMemo)((function(){return{x:i.current.x-i.initial.x,y:i.current.y-i.initial.y}}),[i]),d=function(e){i.dragging&&r(Object(l.a)(Object(l.a)({},i),{},{current:{x:e.clientX,y:e.clientY}}))},s=function(e){i.dragging&&(t(a),r(b))};return Object(o.useEffect)((function(){var t=null;return e.current&&((t=e.current).addEventListener("mousemove",d),t.addEventListener("mouseup",s)),function(){t&&(t.removeEventListener("mousemove",d),t.removeEventListener("mouseup",s))}})),{dragged:a,onMouseDown:function(e){0===e.button&&(e.stopPropagation(),r({dragging:!0,initial:{x:e.clientX,y:e.clientY},current:{x:e.clientX,y:e.clientY}}))}}},p=function(e,t){return".".repeat(t).split("").flatMap((function(){return e}))},f=function(e){var t=e.vertical,n=e.horizontal,c=e.width,o=e.height,r=e.dragged,a="0 0 ".concat(c," ").concat(o),d=t.reduce((function(e,t){return e+t}),0),s=n.reduce((function(e,t){return e+t}),0);t=p(t,c/d),n=p(n,o/s);var u=t.reduce((function(e,t){var n=e.x,i=e.pathCommand,r=(n+t+c)%c;return{x:r,pathCommand:i+"M".concat(r,",0 V").concat(o," ")}}),{x:r.x,pathCommand:""}).pathCommand,j=n.reduce((function(e,t){var n=e.y,i=e.pathCommand,r=(n+t+o)%o;return{y:r,pathCommand:i+"M0,".concat(r," H").concat(c," ")}}),{y:r.y,pathCommand:""}).pathCommand;return Object(i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:a,children:Object(i.jsx)("path",{stroke:"#3c529e",d:u+j})})},O={nodes:[],edges:[]},g=Object(o.createContext)({ref:{current:null}});!function(e){e[e.UpdateRelativePosition=0]="UpdateRelativePosition",e[e.UpdateAttribute=1]="UpdateAttribute",e[e.AddEdge=2]="AddEdge",e[e.RemoveEdge=3]="RemoveEdge"}(c||(c={}));var v=function(e,t){switch(t.type){case c.UpdateRelativePosition:var n=Object(l.a)({},e),i=e.nodes.findIndex((function(e){return e.uid===t.uid}));return-1===i?n.nodes.push({uid:t.uid,x:t.x,y:t.y}):(n.nodes[i].x+=t.x,n.nodes[i].y+=t.y),n;case c.UpdateAttribute:case c.AddEdge:}return e},y=function(e){var t=e.uid,n=e.children,r=e.nodeRef,a=Object(o.useContext)(g),d=a.getPosition,s=a.dispatch,u=a.ref,j=d(t),l=j.x,x=j.y,b=h(u,(function(e){s(function(e,t,n){return{type:c.UpdateRelativePosition,uid:e,x:t,y:n}}(t,e.x,e.y))})),p=b.dragged,f=b.onMouseDown;return Object(o.useEffect)((function(){r.current.style.left=l+p.x+"px",r.current.style.top=x+p.y+"px"}),[l,x,p,r]),Object(i.jsx)("div",{onMouseDown:f,children:n})},m=function(e){var t=e.children,n=e.uid,c=e.nodeRef,r=(0,Object(o.useContext)(g).getPosition)(n),a=r.x,d=r.y;return Object(i.jsx)("div",{style:{position:"absolute",userSelect:"none",left:"".concat(a,"px"),top:"".concat(d,"px")},ref:c,children:t})},w=function(){var e=Object(x.a)(),t=Object(o.useRef)(null);return{uid:e,Node:function(n){var c=Object.assign({},n);return Object(i.jsx)(m,Object(l.a)({uid:e,nodeRef:t},c))},Draggable:function(n){var c=Object.assign({},n);return Object(i.jsx)(y,Object(l.a)({uid:e,nodeRef:t},c))}}},C=function(e){var t=e.vector,n=Math.abs(t.x),c=Math.abs(t.y),o=t.y>0?0:t.y,r=t.x>0?0:t.x,a={x:t.x>0?0:n,y:t.y>0?0:c},d="M ".concat(a.x," ").concat(a.y," l ").concat(t.x," ").concat(t.y);return Object(i.jsx)("div",{style:{position:"relative"},children:Object(i.jsx)("div",{style:{position:"absolute",width:"".concat(n,"px"),height:"".concat(c,"px"),top:"".concat(o,"px"),left:"".concat(r,"px")},children:Object(i.jsx)("svg",{height:c,width:n,children:Object(i.jsx)("path",{d:d,stroke:"white","stroke-width":"2",fill:"none"})})})})},M=function(e){var t=e.children,n=(e.uid,e.position,Object(o.useContext)(g).ref),c=h(n,(function(e){})),r=c.dragged,a=c.onMouseDown;return Object(i.jsxs)("div",{onMouseDown:a,children:[0!==r.x&&0!==r.y&&Object(i.jsx)(C,{vector:r}),t]})},k=function(e){var t=e.children,n=e.width,c=e.height,r=e.background,a=void 0===r?"#1c2e60":r,d=Object(o.useRef)(null),s=Object(o.useReducer)(v,O),j=Object(u.a)(s,2),x=j[0],b=j[1],p=Object(o.useState)({x:0,y:0}),y=Object(u.a)(p,2),m=y[0],w=y[1],C=h(d,(function(e){w({x:m.x+e.x,y:m.y+e.y})})),M=C.dragged,k=C.onMouseDown,R={x:m.x+M.x,y:m.y+M.y};return Object(i.jsx)(g.Provider,{value:{state:x,dispatch:b,getPosition:function(e){var t=x.nodes.find((function(t){return t.uid===e}));return Object(l.a)(Object(l.a)({},{x:0,y:0}),t)},ref:d},children:Object(i.jsxs)("div",{style:{width:"".concat(n,"px"),height:"".concat(c,"px"),backgroundColor:a,color:"#eaeaea",position:"relative",overflow:"hidden"},ref:d,onMouseDown:k,children:[Object(i.jsx)("span",{style:{position:"absolute",userSelect:"none"},children:JSON.stringify(R)}),Object(i.jsx)(f,{height:c,width:n,vertical:[50,10,10,10],horizontal:[50,10,10,10],dragged:R}),Object(i.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",left:"".concat(R.x,"px"),top:"".concat(R.y,"px")},children:Object(i.jsx)("div",{style:{position:"relative",width:"100%",height:"100%"},children:t})})]})})},R=function(){var e=w(),t=e.Node,n=e.Draggable,c=e.uid;return Object(i.jsxs)(t,{children:[Object(i.jsx)(n,{children:Object(i.jsxs)("div",{style:{background:"darkgrey"},children:["Uid: ",c]})}),Object(i.jsx)("div",{style:{background:"black"},children:Object(i.jsx)("div",{style:{padding:"20px"},children:"generic node type 1"})})]})},E=function(e){var t=e.onClose,n=w(),c=n.Node,o=n.Draggable,r=n.uid,a=function(e){var t=Object(x.a)();return{uid:t,Port:function(e){e.position;var n=Object(j.a)(e,["position"]);return Object(i.jsx)(M,Object(l.a)({uid:t},n))}}}(),d=a.uid,s=a.Port;return Object(i.jsx)(c,{children:Object(i.jsx)(o,{children:Object(i.jsxs)("div",{style:{background:"#003"},children:[Object(i.jsx)("div",{style:{position:"absolute",top:"-10px",left:"120px"},children:Object(i.jsx)(s,{position:{x:-10,y:120},children:d})}),Object(i.jsxs)("span",{children:["Uid: ",r]}),Object(i.jsxs)("div",{style:{padding:"20px"},children:["generic node type 2",Object(i.jsx)("button",{onClick:function(){"function"===typeof t&&t()},children:"Close"})]})]})})})},P=function(){var e=Object(o.useState)({max:0,items:[]}),t=Object(u.a)(e,2),n=t[0],c=t[1];return Object(i.jsxs)("div",{children:[Object(i.jsxs)(k,{width:1200,height:500,children:[Object(i.jsx)(R,{}),Object(i.jsx)(R,{}),n.items.map((function(e){return Object(i.jsx)(E,{onClose:function(){return function(e){c({max:n.max,items:n.items.filter((function(t){return t!==e}))})}(e)}},e)}))]}),Object(i.jsx)("button",{onClick:function(){var e=n.max+1;c({max:e,items:[].concat(Object(s.a)(n.items),[e])})},children:"Add new"})]})};d.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(P,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.f996333b.chunk.js.map